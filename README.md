# HTTP Pinger

Простой HTTP пингер для мониторинга доступности веб-сайтов с настраиваемыми таймаутами.

## Описание

Приложение читает список URL из файла `urls.txt` и периодически проверяет их доступность с настраиваемым интервалом. Результаты записываются в файл `log.txt` и выводятся в консоль. Поддерживает настройку HTTP таймаутов для надежного мониторинга.

## Установка и запуск

1. Убедитесь, что у вас установлен Go 1.24 или выше
2. Клонируйте репозиторий
3. Создайте файл `urls.txt` с URL для мониторинга (по одному на строку)
4. Опционально создайте `config.yaml` для настройки таймаутов
5. Запустите приложение:

```bash
go run main.go
```

## Структура проекта

```
http_pinger/
├── main.go              # Главный файл приложения
├── cmd/
│   ├── pinger.go        # Логика пинга URL с таймаутами
│   ├── reader.go        # Чтение URL из файла
│   └── writer.go        # Запись логов
├── interfaces/
│   └── config.go        # Структуры конфигурации
├── urls.txt             # Список URL для мониторинга
├── config.yaml          # Конфигурация таймаутов (опционально)
├── log.txt              # Файл с логами (создается автоматически)
└── go.mod               # Зависимости Go
```

## Конфигурация

### Файл urls.txt

Создайте файл `urls.txt` в корне проекта с URL для мониторинга:

```
https://google.com
https://yandex.ru
https://github.com
```

- Одна строка = один URL
- Поддерживаются комментарии (строки, начинающиеся с #)
- Пустые строки игнорируются
- URL автоматически валидируются

### Файл config.yaml (опционально)

Создайте файл `config.yaml` для настройки таймаутов:

```yaml
# Интервал пинга в секундах
interval_pulling: 5

# HTTP таймауты в секундах
http_timeout: 30        # Общий таймаут для HTTP запроса
connection_timeout: 10   # Таймаут установки соединения
read_timeout: 10         # Таймаут чтения ответа
write_timeout: 10        # Таймаут записи запроса
```

### Значения по умолчанию

Если файл `config.yaml` отсутствует или поврежден, используются значения по умолчанию:
- `interval_pulling`: 5 секунд
- `http_timeout`: 30 секунд
- `connection_timeout`: 10 секунд
- `read_timeout`: 10 секунд
- `write_timeout`: 10 секунд

## HTTP Таймауты

Приложение поддерживает настройку различных типов HTTP таймаутов:

### Типы таймаутов:

1. **http_timeout** - Общий таймаут для всего HTTP запроса
2. **connection_timeout** - Время на установку TCP соединения
3. **read_timeout** - Время на получение ответа от сервера
4. **write_timeout** - Время на отправку запроса

### Преимущества настройки таймаутов:

- **Предотвращение зависания**: Запросы не будут "висеть" бесконечно
- **Экономия ресурсов**: Освобождение соединений при таймауте
- **Надежность**: Приложение продолжает работать даже при проблемах с сетью
- **Гибкость**: Настройка под разные типы серверов

## Логирование

Результаты пинга записываются в файл `log.txt` в формате:

```
2024-01-15T10:30:45Z [https://google.com] 200 OK
2024-01-15T10:30:45Z [https://yandex.ru] ERROR: context deadline exceeded
```

## Управление

- **Ctrl+C** - Graceful shutdown (корректное завершение всех пингеров)
- Приложение автоматически останавливает все горутины при получении сигнала завершения

## Особенности

- **Потокобезопасность**: Используется мьютекс для синхронизации записи логов
- **Graceful shutdown**: Корректное завершение при получении сигналов
- **Валидация URL**: Автоматическая проверка корректности URL
- **HTTP таймауты**: Настраиваемые таймауты для надежного мониторинга
- **Обработка ошибок**: Детальное логирование ошибок без аварийного завершения
- **Консольный вывод**: Результаты пинга отображаются в реальном времени
- **Конфигурация через YAML**: Гибкая настройка параметров

## Требования

- Go 1.24+
- Доступ к интернету для пинга URL
- gopkg.in/yaml.v3 (автоматически устанавливается) 